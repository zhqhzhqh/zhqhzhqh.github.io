---
layout: post
title: 开闭原则
tagline: "对修改关闭，对扩展开放"
category: 设计模式
tags: [设计模式, java, android]

---
{% include JB/setup %}

# 开闭原则（OCP）
软件开发第一原则，是指对修改关闭，对扩展开放，是面向对象开发的可复用设计的基石，也是总纲。
本意是指，系统自身是稳定的，具有高度可扩展性，如果要增加或者修改一个功能，那么对系统做扩展就可以了，而不需要修改现有的稳定的系统。

<!-- excerpt -->

### why
软件称之为系统，那么意味着是由多种事物组合在一起的，他们之间相互作用，相互联系，矛盾无处不在，同样系统也是要变化与发展的，一成不变的系统很快会失去他的使用价值，拥抱变化而不是拒绝变化，是软件开发中思想的一个根基。
在变化中寻找稳定的部分，系统保持延续性的重要途径，越是抽象的越容易保持稳定，越是具体的越容易发生改变，这很容易理解，人是局部永恒的，但具体的人比如张三确实变化的，生老病死，历经一生的沧桑，也许从好人变成坏人又从坏人变成好人，但唯一不变的他还是人。

### 抽象化是关键
系统应该构建在高度的抽象化的概念之上，而不是具体的流沙，比如我们讲一个播放器软件，那么我们首先会想到，打开，播放，暂停，停止，这些基本的概念，而这些概念统称为操作；与操作对应的界面，界面提供了操作与提示两部分；那么基本的系统就确定了，系统包含界面与操作两个部分，操作与界面要保持独立，拥有最小的联系，操作要具有可扩展性，比如增加一个刻录的功能，界面要具有高度的可变化性，能够实现全功能的换肤''', 这是抽象化训练，在高等级保持系统的可扩展性。

### 对于变化的封装
当我们从系统的抽象中，抽离出变与不变的部分以后，那么焦点就集中在如何封装这种变化，这个是很开放的话题，答案会有很多，抛砖引玉的说亮点：

* 将变化聚集到一个尽可能小的范围内，最好锁在一个小屋子里，只留一个小门，如果不需要窗户，就不要加窗户。

* 变化应该保持独立，不要混合在一起，keep simple, keep stupid，保持简单，保持愚蠢，我很傻，傻到只会做一件事，并把这件事做好。

### 与其它原则的关系
实现开闭原则有些规律，这些规律已其它原则的身份出现，是实现开闭原则的手段与工具，是隶属于开闭原则。

* 里氏替换原则， 父类是子类的抽象，子类是父类的实现，二者的划分与使用就体现了开闭原则。

* 依赖倒置原则，无需多言。

* 组合/聚合原则，该原则与里氏替换原则相辅相成，都是实现开闭原则的步骤与规范，前者要求在设计首先要使用组合/聚合关系，后者要求在使用继承关系时，必须确保子类和父类符合里氏替换原则。

* 迪米特法则， 尽可能的少于外界通信，通信越少，越符合高内聚，低耦合。

* 接口隔离原则，要求为客户端提供小而功能单一的独立接口，而不是提供大而综合的接口。


